<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="../../layui/css/layui.css" />
		<link rel="stylesheet" href="../../css/base.css" />
		<link rel="stylesheet" href="../../css/schoolCard.css" />
		<title>卡包</title>
	</head>

	<body>
		<div class="layui-fluid">
			<div>
				<a href="" class="back"><i class="layui-icon layui-icon-left"></i>返回</a>
				<h2 class="file-title">解绑</h2>
			</div>
			<div class="content" id="content">
			</div>
			<!--点击“解绑”出现的弹窗内容-->
			<div class="opendiv" id="opendiv" data-method="offset" data-type="c">
				<h3 class="untyTitle">确定解绑？</h3>
				<hr />
				<button type="button" class="cancel" id="cancel">取消</button>
				<button type="button" class="untying" id="untying">解绑</button>
			</div>
		</div>

		<script type="text/javascript" src="../../js/jquery-3.3.1.min.js"></script>
		<script type="text/javascript" src="../../layui/layui.js"></script>
		<script id="appContent" type="text/html">
			{{# layui.each(d.appList, function(index, item){ }}
			<div class="layui-col-xs12 cardback">
					<ul>
						<li>{{ item.cardName }}</li>
						<li class="cardId">{{ item.cardNumber }}</li>
					</ul>
					<p class="cardSize">{{ item.cardType }}</p>
				</div>
			<!--无数据时-->
			{{# }); }} {{# if(d.appList.length === 0){ }}
			<div class="layui-col-xs12 background">
				<ul>
					<li>广西农村信用社</li>
					<li class="cardId">1237</li>
				</ul>
				<p class="cardSize">校园卡</p>
			</div>
			<div class="layui-col-xs12 background">
				<ul>
					<li>广西农村信用社</li>
					<li class="cardId">6789</li>
				</ul>
				<p class="cardSize">校园卡</p>
			</div>
			<div class="layui-col-xs12 background">
				<ul>
					<li>广西农村信用社</li>
					<li class="cardId">5678</li>
				</ul>
				<p class="cardSize">校园卡</p>
			</div>
			{{# } }}
		</script>
		<script>
			layui.use('laytpl', function() {
				var laytpl = layui.laytpl;
				var appData = { //数据
					"title": "应用模板引擎",
					"appList": [{
							"cardName": "广西农村信用社",
							"cardNumber": "2018  202  345",
							"cardType":"储蓄卡"
						},
						{
							"cardName": "广西农村信用社",
							"cardNumber": "2018  202  345",
							"cardType":"储蓄卡"
						},
						{
							"cardName": "广西农村信用社",
							"cardNumber": "2018  202  345",
							"cardType":"储蓄卡"
						}
					]
				}
				// $.ajax({
				// 	url: '',
				// 	type: 'post',
				// 	data: {
				// 	},
				// 	dataType: 'json',
				// 	success: function (data) {
				// 		console.log(data);3
				// 	}
				var getAppTpl = appContent.innerHTML,
					appView = document.getElementById('content');
				laytpl(getAppTpl).render(appData, function(html) {
					appView.innerHTML = html;
				});
			});
		</script>
		<!--弹窗-->
		<script type="text/javascript">
			layui.use('layer', function() {
				var layer = layui.layer;
				
			});
			//点击卡出现弹窗暂未完成
			$(".content").on('click', function() {
				layer.confirm('', {
					title: false,
					closeBtn: false,
					area: '90%;',
					type: 1,
					shift: -1,
					offset: 'b',
					shadeClose: true,
					btn: ['解绑', '取消'] //按钮
				}, function() {
					var index = layer.open({
						title: false,
						closeBtn: false,
						area: '50%;',
						type: 1,
						shift: -1,
						offset: 'auto',//位置
						shadeClose: true,
						content: $('#opendiv')
					}) 
				});
			});
			$(".cancel").on('click', function() {
				layer.closeAll();
			});
			$(".untying").on('click', function() {
				var index = layer.msg("解绑成功",{time:2000});
				layer.close("#opendiv");
				layer.close(layer.index-1);
				layer.close(layer.index-2);
			});
			
		</script>
	</body>

</html>